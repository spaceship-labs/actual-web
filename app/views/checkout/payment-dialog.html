<md-dialog class="deposit-dialog" aria-label="Terminal"  ng-cloak>
  <div class="deposit-dialog-inner">
    <h2><strong>2. INGRESA LOS DATOS DE TU TARJETA DE DÉBITO O CRÉDITO</strong></h2>
    <form name="paymentForm" ng-submit="paymentConekta(paymentForm)" class="form-section" id="paymentForm">
        <hr>
        <div class="input-container" layout="row" layout-wrap flex="100">
          <div flex="50" class="input-element">
            <label>
              <p><strong>NOMBRE DEL TARJETAHABIENTE</strong>*<small>(Como aparece en el plástico)</small></p>
            </label>
            <div flex="95" class="input-element-inner">
              <input type="text" ng-model="payment.cardName" required>
            </div>
          </div>
          <div flex class="input-element">
            <label>
              <p><strong>TIPO DE TARJETA</strong>*</p>
            </label>
            <div flex="70" ng-if="payment.options.length > 0">
              <div class="input-element select-element-wrapper">
                <md-select 
                  ng-model="payment.card"
                  ng-change="onChangeCard(payment.card)" 
                  class="select-element"
                >
                  <md-option
                    ng-repeat="option in payment.options track by $index"
                    ng-selected="$index==0"
                    ng-value="option.card.value">
                    {{option.card.label}}
                  </md-option>
                </md-select>
              </div>
              <input type="hidden" name="card" ng-model="payment.card">
            </div>
          </div>
        </div>
        <div class="input-container" layout="row" layout-wrap flex="100">
          <div  flex="50" class="input-element">
            <label>
              <p><strong>NÚMERO DE TARJETA</strong>*<small>(Ingresar sin espacios y sin guiones)</small></p>
            </label>
            <div flex="95" class="input-element-inner">
              <input type="text" ng-model="payment.cardNumber" size="52" placeholder="0000 0000 0000 ****" required>
            </div>
          </div>
          <div class="input-element" flex="20">
            <label>
              <p><strong>FECHA DE EXPIRACIÓN</strong>*</p>
            </label>
            <div layout="row" layout-xs="column" class="expiration-inner">
              <div flex="35" class="input-element-inner date-margin">
                <input type="text" ng-model="payment.dateMonth" placeholder="MM" required>
              </div>
              <div flex="35" class="input-element-inner">
                <input type="text" ng-model="payment.dateYear" placeholder="AA" required>
              </div>
            </div>
          </div>
          <div class="input-element" flex>
            <label>
              <p><strong>CÓDIGO CVC</strong>*</p>
            </label>
            <div flex="50" class="input-element-inner">
              <input type="text" ng-model="payment.cvc" placeholder="999" required>
            </div>
          </div>
        </div>
        <div class="input-container" layout="row" layout-wrap flex="100">
          <div class="input-element" flex="35">
            <label>
              <p><strong>PAÍS</strong>*</p>
            </label>
            <div flex="85" class="input-element-inner">
              <input type="text" ng-model="payment.cardCountry" required>
            </div>
          </div>
          <div class="input-element" flex="35">
            <label>
              <p><strong>ESTADO</strong>*</p>
            </label>
            <div flex="85" class="input-element-inner">
              <input type="text" ng-model="payment.cardState" required>
            </div>
          </div>
          <div class="input-element" flex="20">
            <label>
              <p><strong>CÓDIGO POSTAL</strong>*</p>
            </label>
            <div flex="75" class="input-element-inner">
              <input type="text" ng-model="payment.cardZip" required>
            </div>
          </div>
        </div>
        <div class="input-container" layout="row" layout-wrap flex="100">
          <div class="input-element">
            <label>
              <p><strong>CIUDAD</strong>*</p>
            </label>
            <div flex="90" class="input-element-inner">
              <input type="text" ng-model="payment.cardCity" required>
            </div>
          </div>
          <div flex="30" class="input-element">
            <label>
              <p><strong>COLONIA</strong>*</p>
            </label>
            <div flex="95" class="input-element-inner">
              <input type="text" ng-model="payment.cardAdress1" required>
            </div>
          </div>
          <div flex class="input-element" >
            <label>
              <p><strong>CALLE Y NÚMERO</strong>*</p>
            </label>
            <div flex="70" class="input-element-inner">
              <input type="text" ng-model="payment.cardAdress2" required>
            </div>
          </div>
        </div>
        <div class="input-container" layout="row" flex="100" layout-align="center center">
          <div flex="35" class="input-element dialog-row" >
            
            <div 
              class="ammount-input" 
              layout="row" 
              layout-align="start center"
            >
              <div class="input-element" flex="60">
                <div class="input-element-inner">
                  <input
                    ng-if="maxAmmount && maxAmmount >=0"
                    type="text"
                    max="{{maxAmmount}}"
                    ng-model="payment.ammount"
                    class="with-maxammount"
                    ng-currency
                    >
                  <input
                    ng-if="!maxAmmount"
                    type="text"
                    ng-currency
                    ng-model="payment.ammount"
                    >

                </div>
              </div>
              <div class="currency-label">
                <span>MXN</span>
              </div>
            </div>
          </div>
          <div flex="35" class="input-element dialog-row ">
            <p ng-show="!payment.msi" ><strong>1 Pago de </strong>{{payment.ammount | roundCurrency}} MXN</p>
            <p ng-show="payment.msi"><strong>{{payment.msi}} Meses SIN INTERESES de </strong>{{payment.ammount / payment.msi | roundCurrency}} MXN</p>
            <small>*Precios en Pesos Mexicanos con impuestos incluidos.</small>

          </div>
          <div flex="30" class="input-element dialog-row">
            <a 
              ng-click="save()"
              ng-class="{'action-btn-disabled': isValidPayment() }" 
              class="action-btn action-btn-save" 
              href="#" 
              flex="80">
              <strong>PAGAR</strong>
            </a>
          </div>
        </div>
    </form>
    
  </div>
</md-dialog>
