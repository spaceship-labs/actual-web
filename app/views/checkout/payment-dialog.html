<md-dialog class="deposit-dialog" aria-label="Terminal"  ng-cloak>
  <div class="deposit-dialog-inner">
    <h2><strong>2. INGRESA LOS DATOS DE TU TARJETA DE DÉBITO O CRÉDITO</strong></h2>
    <hr />
    
    <form action="" method="POST" id="card-form">
      <span class="card-errors"></strong></span>
      <div flex="100"  class="input-container"> 
        <div layout="row" layout-wrap>  
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>NOMBRE DEL TARJETAHAMBIENTE<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner"> 
              <input type="text" data-conekta="card[name]"/>
            </div>
          </div>
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>TIPO DE TARJETA<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner">
              <input type="text" data-conekta="card[number]"/>
            </div>
          </div>
        </div>
        <div layout="row" layout-wrap>  
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>NÚMERO DE TARJETA<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner">
              <input type="text" data-conekta="card[number]"/>
            </div>
          </div>
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>FECHA DE EXPIRACIÓN<span class="hl-label">*</span></strong>
            </label>
            <div flex layout="row" layout-xs="column">
              <div flex="20">
                <div class="input-element-inner">
                  <input type="text" data-conekta="card[cvc]" placeholder="MM">
                </div>
              </div>
              <div flex="60" style="margin-left: 1em">
                <div class="input-element-inner">
                  <input type="text" data-conekta="card[exp_year]" placeholder="AA">
                </div>
              </div>
            </div>
          </div>
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>CÓDIGO CVC<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner">
              <input type="text" data-conekta="card[cvc]" placeholder="999" />
            </div>
          </div>
        </div>
        <div layout="row" layout-wrap>  
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>PAÍS<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner"> 
              <input type="text" data-conekta="card[address][country]"/>
            </div>
          </div>
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>ESTADO<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner">
              <input type="text" data-conekta="card[address][state]"/>
            </div>
          </div>
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>CÓDIGO POSTAL<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner">
              <input type="text" data-conekta="card[address][zip]"/>
            </div>
          </div>
        </div>
        <div layout="row" layout-wrap>  
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>CIUDAD<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner"> 
              <input type="text" data-conekta="card[address][city]"/>
            </div>
          </div>
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>COLONIA<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner">
              <input type="text" data-conekta="card[address][street2]"/>
            </div>
          </div>
          <div flex-gt-sm="33" flex="100" class="input-element">
            <label>
              <strong>CALLE Y NÚMERO<span class="hl-label">*</span></strong>
            </label>
            <div class="input-element-inner">
              <input type="text" data-conekta="card[address][street1]"/>
            </div>
          </div>
        </div>
      </div>
      <div class="dialog-block" >
        <br/>
        <p><strong>Restante:</strong> {{payment.remaining | roundCurrency}}</p>
        
        <!--<p ng-if="payment.ammount > maxAmmount">
          Máximo excedido
        </p>
        -->
        <p class="error-msg" ng-if="errMsg">{{errMsg}}</p>

        <div class="ammount-input" layout="row" layout-align="start center">
          <div class="input-element" flex="60">
            <div class="input-element-inner">
              <input
                ng-if="maxAmmount && maxAmmount >=0"
                type="text"
                max="{{maxAmmount}}"
                ng-model="payment.ammount"
                ng-currency
                >
              <input
                ng-if="!maxAmmount"
                type="text"
                ng-currency
                ng-model="payment.ammount"
                >

            </div>
          </div>
          <div class="currency-label">
            <span ng-if="payment.currency != 'usd'">MXN</span>
            <span ng-if="payment.currency == 'usd'">USD ({{ getAmmountMXN(payment.ammount) | currency}} MXN)</span>
          </div>
        </div>
        <p ng-if="payment.currency == 'usd'">
          <small>Tipo de cambio: {{payment.exchangeRate | currency}} MXN</small>
        </p>
      </div>
      <div class="dialog-block" layout="row" layout-align="space-between end">
        <div flex="50" ng-if="payment.msi">
        <h3><strong>{{payment.msi}}</strong> Meses SIN INTERESES</h3>
        </div>
      </div>
      <div  layout="row" layout-align="space-between end">
        <a 
          ng-click="save()"
          ng-class="{'action-btn-disabled': isValidPayment() }" 
          class="action-btn action-btn-save" 
          href="#" 
          flex="25">
          <strong>PAGAR</strong>
        </a>
      </div>
    </form>
  </div>
</md-dialog>
