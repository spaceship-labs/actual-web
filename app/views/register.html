<div ng-if="vm.isLoading" layout="row" layout-align="center center" class="loading-circle">
  <md-progress-circular class="md-accent" md-diameter="100px"></md-progress-circular>
</div>

<!--- ACTIVATE VIEW IF ADD TO CARD IS TRUE -->
<section ng-if="!vm.isLoading && vm.isContactCreateActive " class="form-view container container-xlg quotation-view">
  <div ng-submit="vm.continueBuying()" class="cart-view container container-xlg">
    <div layout="row" layout-wrap>
      <section flex="70" flex-sm="100" flex-xs="100" class="accordion-register-section">
        <section id="register" class="form-view checkbox-client-type container-xlg ">
          <div class="container container-xlg ">
            <div ng-if="vm.isLoading" layout-fill layout="row" fxLayoutAlign="center center" class="loading-circle">
              <md-progress-circular md-mode="indeterminate" md-diameter="150"></md-progress-circular>
            </div>

            <section ng-if="!vm.isLoading && vm.registerDone">
              <h3>Usuario registrado con éxito</h3>
              <!--<p>Haz click <a ng-click="main.toggleLoginModal()" href="" class="login-toggler">aqui</a> para iniciar sesión</p>-->
            </section>

            <div ng-if="!vm.isLoading && !vm.registerDone">
              <div flex="95">
                <h1 class="cart-title" style="
                margin-top: -20px;
            ">
                  <i class="icon-login"><strong style="
                    font-family: 'Helvetica Neue';
                    margin-left: 10px;
                ">INGRESA TUS DATOS</strong></i>
                </h1>
                <hr />
              </div>

              <!-- ACCORDION LIST -->
              <!-- modificar main.cssclass="container-accordion" -->
              <div class="container-accordion">
                <!-- ACCORDION CONTENT FOR REGISTER -->
                <button class="accordion" ng-click="vm.accordionregister = !vm.accordionregister">
                  <strong class="strong-accordion">¿NO TIENES UNA CUENTA?</strong>
                  <span class="span-accordion" hide-xs hide-sm>Registrate
                    aquí</span>
                </button>
                <form class="accordion-content" ng-show="vm.accordionregister" name="registerForm"
                  ng-submit="vm.register(registerForm)">
                  <div class="input-element-header">
                    <h4>DATOS PERSONALES DEL USUARIO</h4>

                    <div class="input-container">
                      <div class="input-element">
                        <p>
                          <label><strong>Nombre(s)*</strong></label>
                        </p>
                        <div class="input-element-inner">
                          <input type="text" ng-model="vm.newClient.FirstName" required />
                        </div>
                      </div>
                    </div>

                    <div class="input-container">
                      <div class="input-element">
                        <p>
                          <label><strong>Apellido(s)*</strong></label>
                        </p>
                        <div class="input-element-inner">
                          <input type="text" ng-model="vm.newClient.LastName" required />
                        </div>
                      </div>
                    </div>

                    <div class="input-container">
                      <div class="input-element">
                        <p>
                          <label><strong>Email*</strong></label>
                        </p>
                        <div class="input-element-inner">
                          <input type="email" ng-model="vm.newClient.E_Mail" required />
                        </div>
                      </div>
                    </div>

                    <div class="input-container">
                      <div class="input-element">
                        <p>
                          <label><strong>Télefono móvil*</strong></label>
                        </p>
                        <div class="input-element-inner">
                          <input type="text" ng-model="vm.newClient.Cellular" required />
                        </div>
                      </div>
                    </div>
                    <!-- <hr> 
                    <h4>DIRECCION DE FACTURACION</h4>
                    <section class="form-section-content form-section-content-v2" layout="row" layout-align="space-between center">
                      <div flex="100">
                        <div layout="row" layout-wrap>
                          <div flex="25" flex-xs="45" class="input-element">
                            <label>
                              <strong>Calle<span class="hl-label">*</span></strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="vm.newAddress.Address" required />
                            </div>
                          </div>
                          <div flex="15" flex-xs="45" class="input-element">
                            <label>
                              <strong>No. Exterior<span class="hl-label">*</span></strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="vm.newAddress.U_Noexterior" required />
                            </div>
                          </div>
                          <div flex="15" flex-xs="45" class="input-element">
                            <label>
                              <strong>No. Interior </strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="vm.newAddress.U_Nointerior" />
                            </div>
                          </div>
                          <div flex flex-xs="45" class="input-element">
                            <label>
                              <strong>Colonia<span class="hl-label">*</span></strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="vm.newAddress.U_Colonia" required />
                            </div>
                          </div>
                        </div>
                        <div layout="row" layout-wrap>
                          <div flex flex-xs="45" class="input-element">
                            <label>
                              <strong>Municipio o delegación<span class="hl-label">*</span></strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="vm.newAddress.U_Mpio" required />
                            </div>
                          </div>
                          <div flex="20" flex-xs="45" class="input-element">
                            <label>
                              <strong>Ciudad<span class="hl-label">*</span></strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="vm.newAddress.U_Ciudad" required />
                            </div>
                          </div>
                          <div flex="20" flex-xs="45" class="input-element">
                            <label>
                              <strong>Estado<span class="hl-label">*</span></strong>
                            </label>
                            <div class="input-element-inner">
                              <md-select ng-model="vm.newAddress.U_Estado" class="select-element" required>
                                <md-option ng-repeat="state in vm.states" ng-value="state.Code">
                                  {{ state.Name }}
                                </md-option>
                              </md-select>
                            </div>
                          </div>
                          <div flex flex-xs="45" class="input-element">
                            <label>
                              <strong>Código postal<span class="hl-label">*</span></strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="vm.newAddress.U_CP" required />
                            </div>
                          </div>
                          <!-- <div flex-gt-sm="25" flex="100" class="input-element"></div> 
                        </div>
                        <div layout="row" layout-wrap>
                          <div flex="25" flex-xs="40" class="input-element">
                            <label>
                              <strong>Entre calle</strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="vm.newAddress.U_Entrecalle" />
                            </div>
                          </div>
                          <div flex="5" class="input-element">
                            <label>
                              <strong>Y</strong>
                            </label>
                          </div>
                          <div flex="25" flex-xs="45" class="input-element">
                            <label>
                              <strong>Calle</strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="vm.newAddress.U_Ycalle" />
                            </div>
                          </div>
                          <div flex flex-xs="45" class="input-element">
                            <label>
                              <strong>Referencias cercanas</strong>
                            </label>
                            <div class="input-element-inner">
                              <input type="text" maxlength="100" ng-model="vm.newAddress.U_Notes1" />
                            </div>
                          </div>
                           <div flex-gt-sm="10" flex="100" class="input-element"></div> 
                        </div>
                      </div>
                    </section> -->

                    <div ng-if="vm.isContactCreateActive">
                      <ng-include src="'views/partials/contact-form-register.html'"></ng-include>
                    </div>
                    <hr />
                    <div class="input-container" ng-if="!vm.newClient.invited">
                      <div class="input-element">
                        <p>
                          <label><strong>Contraseña*</strong></label>
                        </p>
                        <div class="input-element-inner">
                          <input type="password" ng-model="vm.newClient.password" required />
                        </div>
                      </div>
                    </div>
                    <div class="input-container" ng-if="!vm.newClient.invited">
                      <div class="input-element">
                        <p>
                          <label><strong>Confirmar contraseña*</strong></label>
                        </p>
                        <div class="input-element-inner">
                          <input type="password" ng-model="vm.newClient._password" ng-pattern="vm.newClient.password"
                            required />
                        </div>
                      </div>
                    </div>
                    <button type="submit" class="form-view-btn form-view-btn-primary">
                      Continuar
                    </button>
                  </div>
                </form>
                                <!-- ACCORDION CONTENT FOR SESSION -->
                <button class="accordion" ng-click="vm.accordionsession = !vm.accordionsession">
                  <strong class="strong-accordion">INICIAR SESIÓN</strong>
                  <span class="span-accordion" hide-xs hide-sm>Si ya tienes una cuenta con nosotros</span>
                </button>
                <form class="accordion-content" ng-show="vm.accordionsession" name="signInForm"
                  ng-submit="vm.signIn(signInForm)">
                  <div class="input-element-header">
                    <div class="input-container">
                      <div class="input-element">
                        <p>
                          <label><strong>Correo*</strong></label>
                        </p>
                        <div class="input-element-inner">
                          <input type="email" ng-model="vm.existingClient.email" required />
                        </div>
                      </div>
                    </div>

                    <div class="input-container" ng-if="!vm.newClient.invited">
                      <div class="input-element">
                        <p>
                          <label><strong>Contraseña*</strong></label>
                        </p>
                        <div class="input-element-inner">
                          <input type="password" ng-model="vm.existingClient.password" required />
                        </div>
                      </div>
                    </div>
                    <button type="submit" class="form-view-btn form-view-btn-primary">
                      Iniciar Session
                    </button>
                  </div>
                </form>
              </div>
              <!--ACCORDION LIST END-->
            </div>
          </div>
        </section>
      </section>

      <!-- ADD TO MY CARD INFORMATION -->
      <aside hide-xs flex flex-sm="100" flex-xs="100" class="cart-aside" ng-show="!vm.quotation.isSpeiQuotation">
        <h1 class="cart-title">
          <i class="icon-carro">
            <span>{{ vm.quotation.totalProducts }}</span>
          </i>
          <strong>DETALLES DEL CARRITO</strong>
        </h1>

        <div class="cart-summary">
          <table>
            <tr>
              <td>
                <strong>Subtotal ({{
                    vm.quotation.totalProducts
                  }}
                  productos):</strong>
              </td>
              <td>
                <strong>MXN {{ vm.quotation.subtotal | currency }}</strong>
              </td>
            </tr>
            <tr>
              <td style="color: #e2023f;">Descuento:</td>
              <td>
                <strong style="color: #e2023f;">MXN <span
                    ng-show="vm.quotation.discount > 0">-</span>{{ vm.quotation.discount | currency }}</strong>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Costo de envío:</strong>
              </td>
              <td>
                <strong>MXN $0.00</strong>
              </td>
            </tr>
          </table>

          <hr />

          <div class="cart-total" layout="row" layout-align="space-between center">
            <div flex="30">
              <strong>TOTAL:</strong>
            </div>
            <div flex="70" layout="row" layout-align="end center">
              <div class="price-main ng-binding" style="font-weight: 700; font-size: x-large; color: #d00404;">
                <span class="currency-label customT"></span>
                {{ vm.quotation.total | roundCurrency }}
              </div>
              <h3 hide-xs class="price-crossed-block" ng-show="vm.quotation.subtotal != vm.quotation.total">
                <span class="ng-binding" style="font-size: large; text-decoration: line-through; font-weight: 300; color: #848484; margin-left: 5px;">
                {{ vm.quotation.subtotal | roundCurrency }}</span>
              </h3>
            </div>
          </div>

          <div class="alert-btn-wrap" ng-if="vm.quotation.bigticketMaxPercentage > 0 && false">
            <a href="#" ng-click="vm.showBigTicketDialog()">
              <i class="icon-alert"></i>
            </a>
          </div>
          <p class="cart-summary-note" ng-show="vm.isValidatingStock && vm.quotation.Details">
            Validando disponibilidad...
          </p>

          <p class="cart-summary-note">
            Precios con impuestos incluidos.
          </p>
        </div>
      </aside>
    </div>
  </div>
</section>
</div>

<!--- ACTIVATE VIEW IF ADD TO CARD IS FALSE -->

<section ng-if="(!vm.isLoading && !vm.fromQuotation)" id="register" class="form-view checkbox-client-type">
  <div class="container container-lg">
    <section ng-if="!vm.isLoading && vm.registerDone">
      <h3>Usuario registrado con éxito</h3>
    </section>

    <form ng-if="!vm.isLoading && !vm.registerDone" name="registerForm" ng-submit="vm.register(registerForm)">

      <h1>
        <i class="icon-login"></i> Ingresa tus datos
        <small>o</small>
        <a href="" ng-click="main.toggleLoginModal()" class="login-link login-toggler action-link">inicia sesión</a>
      </h1>

      <hr />

      <h4>DATOS PERSONALES DEL USUARIO</h4>

      <div class="input-container">
        <div class="input-element">
          <p>
            <label><strong>Nombre(s)*</strong></label>
          </p>
          <div class="input-element-inner">
            <input type="text" ng-model="vm.newClient.FirstName" required />
          </div>
        </div>
      </div>

      <div class="input-container">
        <div class="input-element">
          <p>
            <label><strong>Apellido(s)*</strong></label>
          </p>
          <div class="input-element-inner">
            <input type="text" ng-model="vm.newClient.LastName" required />
          </div>
        </div>
      </div>

      <div class="input-container">
        <div class="input-element">
          <p>
            <label><strong>Email*</strong></label>
          </p>
          <div class="input-element-inner">
            <input type="email" ng-model="vm.newClient.E_Mail" required />
          </div>
        </div>
      </div>

      <div class="input-container">
        <div class="input-element">
          <p>
            <label><strong>Confirmar email*</strong></label>
          </p>
          <div class="input-element-inner">
            <input type="email" ng-model="vm.newClient._E_Mail" ng-pattern="vm.newClient.E_Mail" required />
          </div>
        </div>
      </div>

      <div class="input-container">
        <div class="input-element">
          <p>
            <label><strong>Télefono fijo</strong></label>
          </p>
          <div class="input-element-inner">
            <input type="text" ng-model="vm.newClient.Phone1" />
          </div>
        </div>
      </div>

      <div class="input-container">
        <div class="input-element">
          <p>
            <label><strong>Télefono móvil*</strong></label>
          </p>
          <div class="input-element-inner">
            <input type="text" ng-model="vm.newClient.Cellular" required />
          </div>
        </div>
      </div>

      <div ng-if="vm.isCheckoutProcessActive" class="checkbox-client-type">
        <md-checkbox ng-model="vm.newClient.invited">
          <strong>Deseo continuar como invitado</strong>
        </md-checkbox>
      </div>

      <div class="input-container" ng-if="!vm.newClient.invited">
        <div class="input-element">
          <p>
            <label><strong>Contraseña*</strong></label>
          </p>
          <div class="input-element-inner">
            <input type="password" ng-model="vm.newClient.password" required />
          </div>
        </div>
      </div>

      <div class="input-container" ng-if="!vm.newClient.invited">
        <div class="input-element">
          <p>
            <label><strong>Confirmar contraseña*</strong></label>
          </p>
          <div class="input-element-inner">
            <input type="password" ng-model="vm.newClient._password" ng-pattern="vm.newClient.password" required />
          </div>
        </div>
      </div>

      <div ng-if="vm.isContactCreateActive || main.activeQuotation">
        <ng-include src="'views/partials/contact-form-register.html'">
        </ng-include>
      </div>

      <button type="submit" class="form-view-btn form-view-btn-primary">
        Continuar
      </button>
    </form>
  </div>
</section>
